<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zentail Login - Welcome Back!</title>
   <link rel="stylesheet" href="./static/css/styles.css">
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Nunito:wght@500;700&family=Micro+5&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    
</head>
<body>
    
    <div class="dog-cursor-layer"></div>

    <div class="background-container" >
        <div class="gradient-overlay"></div>
        <ul class="pet-bubbles">
            <li>ğŸ¾</li><li>ğŸ¦´</li><li>ğŸˆ</li><li>ğŸ•</li><li>ğŸ¾</li><li>ğŸ¦´</li><li>ğŸˆ</li><li>ğŸ•</li>
            <li>ğŸ¾</li><li>ğŸ¦´</li><li>ğŸˆ</li><li>ğŸ•</li><li>ğŸ¾</li><li>ğŸ¦´</li>
        </ul>
    </div>
<div class="auth-page-center">
  <div class="login-wrapper">
    <div class="login-wrapper">
        <div id="login-card" class="glassmorphism-card"><br><br>
            <h1 class="logo-text" style="font-family: 'Micro 5', sans-serif;
    font-size: clamp(1.8rem, 4vw, 4.5rem);
    letter-spacing: 2px;color: whitesmoke;">Zentail</h1>
            <p class="tagline" style="color: white;">Your Pets' Happy Place Awaits!</p>

            <form id="login-form">
                <div class="input-group">
                    <label for="email"style="color: white;">Email</label>
                    <input type="email" id="email" placeholder="Fido@example.com" requiredstyle="color: white;">
                </div>
                <div class="input-group">
                    <label for="password"style="color: white;">Password</label>
                    <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" requiredstyle="color: white;">
                </div>

                <button type="submit" class="login-btn">
                    Leap into Zentail <span class="arrow-icon">â†’</span>
                </button>
            </form>

           <br> <div class="divider"style="color: white;">OR</div>
            <br>
            <p class="footer-text"style="color: white;">
    Don't have an account? 
    <a href="{{ url_for('create_account_page') }}" id="toggle-signup">Create a Happy Account</a>
</p>
            <p id="error-message" class="error-msg"></p>
        </div>
        
        <div id="signup-card" class="glassmorphism-card hidden-card">
            </div>
    </div>
  </div>
</div>


    <script >

        const dogLayer = document.querySelector('.dog-cursor-layer');
if (dogLayer) {
  window.addEventListener('mousemove', (e) => {
    const x = e.clientX;
    const y = e.clientY;
    const easedX = x + (window.innerWidth  / 40);
    const easedY = y + (window.innerHeight / 40);
    dogLayer.style.transform = `translate(${easedX - 60}px, ${easedY - 60}px)`; 
  });
}

        // 1. Initialize Firebase (Replace with your actual config)
  const firebaseConfig = {
    apiKey: "AIzaSyBzihO1Jx5vZZlkklkTzwJD80gWPxZ73OQ",
    authDomain: "zentail-eb480.firebaseapp.com",
    projectId: "zentail-eb480",
    storageBucket: "zentail-eb480.firebasestorage.app",
    messagingSenderId: "531711967970",
    appId: "1:531711967970:web:2c730083ccb4fc711154bb",
    measurementId: "G-7L522BSXP2"
  };
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();


// Helper function to show/hide the card with a flip transition
function toggleCard(targetId) {
    // Implement your desired card transition here, e.g., a flip animation
    const loginCard = document.getElementById('login-card');
    const signupCard = document.getElementById('signup-card');

    if (targetId === 'login') {
        signupCard.classList.add('hidden-card');
        loginCard.classList.remove('hidden-card');
    } else { // targetId === 'signup'
        loginCard.classList.add('hidden-card');
        signupCard.classList.remove('hidden-card');
    }
}

// UI Elements
const loginForm = document.getElementById('login-form');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const googleLoginBtn = document.getElementById('google-login-btn');
const errorMessage = document.getElementById('error-message');

/* ==============================
   1. EMAIL / PASSWORD LOGIN
================================ */
loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
    errorMessage.textContent = '';

    const email = emailInput.value.trim();
    const password = passwordInput.value;

    auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
            const emailLower = userCredential.user.email.toLowerCase();

            if (emailLower.includes("admin")) {
                window.location.href = "/admin";
            } else {
                window.location.href = "/home";
            }
        })
        .catch((error) => {
            errorMessage.textContent = `Login failed: ${error.message}`;
        });
});

// 4. Auth State Observer (BEST PRACTICE)
auth.onAuthStateChanged((user) => {
    if (user) {
        // User is signed in, handle persistent login or redirect
        // This is where you can show a subtle 'Welcome back, [Pet Parent Name]!' transition
        console.log('Auth state changed. User is logged in.');
    } else {
        // User is signed out.
        console.log('Auth state changed. User is logged out.');
    }
});






    </script>

<!-- DOG MASCOT -->
<div id="dog" class="idle">
  <div class="dog-head">
    <div class="ear left"></div>
    <div class="ear right"></div>

    <div class="face">
      <div class="eye left"><div class="pupil"></div></div>
      <div class="eye right"><div class="pupil"></div></div>

      <div class="muzzle">
        <div class="nose"></div>
        <div class="mouth"></div>
      </div>
    </div>
  </div>

  <div class="dog-body">
    <div class="leg front left"></div>
    <div class="leg front right"></div>
    <div class="leg back left"></div>
    <div class="leg back right"></div>
    <div class="tail"></div>
  </div>
</div>


<script>
const dogEl = document.getElementById('dog');
if (dogEl) {
  const pupils = dogEl.querySelectorAll('.pupil');
  window.addEventListener('mousemove', (e) => {
    const rect = dogEl.getBoundingClientRect();
    const cx = rect.left + rect.width / 2;
    const cy = rect.top + rect.height / 2;
    const dx = e.clientX - cx;
    const dy = e.clientY - cy;
    const angle = Math.atan2(dy, dx);
    const r = 3;
    const px = Math.cos(angle) * r;
    const py = Math.sin(angle) * r;
    pupils.forEach(p => {
      p.style.transform = `translate(${px}px, ${py}px)`;
    });
  });
}


  (function() {
    const dog = document.getElementById('dog');
    if (!dog) return;

    const ears = dog.querySelectorAll('.ear');
    const eyes = dog.querySelectorAll('.eye');
    const pupils = dog.querySelectorAll('.pupil');
    const passwordInput = document.getElementById('password');

    /* 1) Eyes follow mouse slightly */
    window.addEventListener('mousemove', (e) => {
      const rect = dog.getBoundingClientRect();
      const cx = rect.left + rect.width / 2;
      const cy = rect.top + rect.height / 2;

      const dx = e.clientX - cx;
      const dy = e.clientY - cy;
      const angle = Math.atan2(dy, dx);
      const r = 4;

      const px = Math.cos(angle) * r;
      const py = Math.sin(angle) * r;

      pupils.forEach(p => {
        p.style.transform = `translate(${px}px, ${py}px)`;
      });
    });

    /* 2) Click ears -> little reaction */
    ears.forEach(ear => {
      ear.addEventListener('click', (e) => {
        e.stopPropagation();
        ear.classList.add('ear-clicked');
        setTimeout(() => ear.classList.remove('ear-clicked'), 350);
      });
    });

    /* 3) While typing password, cover eyes with ears */
    if (passwordInput) {
      passwordInput.addEventListener('focus', () => {
        dog.classList.add('dog-hide-eyes');
      });
      passwordInput.addEventListener('blur', () => {
        dog.classList.remove('dog-hide-eyes');
      });
      passwordInput.addEventListener('input', () => {
        dog.classList.add('dog-hide-eyes');
      });
    }
  })();

</script>
</body>
</html>